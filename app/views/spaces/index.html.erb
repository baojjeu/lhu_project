<br><br>

<div class="container">
  <div class="row clearfix">
    <div class="side-block">
      <%= form_for spaces_path, method: :get do %>
        <p>
          <%= label_tag :search, '公開場地', class: 'control-label' %>
          <%= text_field_tag :search, params[:search], class: 'form-control', placeholder: '場地名稱、刊登者或關鍵字' %>
<br>
          <%= label_tag :start_at, '依刊登日期搜尋', class: 'control-label' %>
          <%= text_field_tag :start_at, params[:start_at], id: 'start_at', data: { "date-format" => "YYYY/MM/DD" }, class: 'form-control', placeholder: '年/月/日起至' %>
          <%= text_field_tag :end_at, params[:end_at], id: 'end_at', data: { "date-format" => "YYYY/MM/DD" }, class: 'form-control', placeholder: '年/月/日止' %>
<br>
          <%= link_to '依照' %>
<br>
          <%= submit_tag "search", name: nil, class: 'btn btn-success' %>
        </p>
      <% end %>
    </div>
    <div class="space-block">
      <ul class="space-list">
        <li class="clearfix">
          <% @spaces.each do |space| %>

            <h2><%= link_to space.name, preview_space_path(space) %></h2>
            <% if space.space_view? %>
              <%= image_tag space.space_view_url(:index).to_s, style: 'width: 120px; height: 120px' %>
            <% else %>
              <%= image_tag 'block-default.png', style: 'width: 120px; height: 120px' %>
            <% end %>
            <div class="date"><%= space.updated_at.strftime("%Y/%m/%d %H:%M") %></div>
            <div class="owner"><%= space.user.name %></div>
            <div class="category"><%= space.category.name %></div>
            <div class="description"><%= space.intro %></div>
            <%= link_to '瀏覽場地', preview_space_path(space), class: 'btn btn-success pull-right' %>
          <% end %>
        </li>
      </ul>
    </div>
  </div>
</div>


<script>
$(function() {
  $('#start_at').datetimepicker({
    pickTime: false
  });
  $('#end_at').datetimepicker({
    pickTime: false
  });
  $("#start_at").on("dp.change",function (e) {
     $('#end_at').data("DateTimePicker").setMinDate(e.date);
  });
  $("#end_at").on("dp.change",function (e) {
     $('#start_at').data("DateTimePicker").setMaxDate(e.date);
  });
});
</script>