<div class="container">
<%= params %>
  <h1>Listing blocks</h1>

  <br>

    <%= form_for blocks_path, method: :get do %>
      <p>
        <%= text_field_tag :search, params[:search] %>
        <%= text_field_tag :start_at, params[:start_at], id: 'start_at', data: { "date-format" => "YYYY/MM/DD" } %>
        <%= text_field_tag :end_at, params[:end_at], id: 'end_at', data: { "date-format" => "YYYY/MM/DD" } %>
        <%= submit_tag "search", name: nil %>
      </p>
    <% end %>



  <table class="table">
    <thead>
      <tr>
        <th>ID</th>
        <th>Name</th>
        <th>Left</th>
        <th>Top</th>
        <th>Width</th>
        <th>Height</th>
        <th>Space</th>
        <th>Block type</th>
        <th>Parent</th>
        <th>Date</th>
        <th></th>
        <th></th>
      </tr>
    </thead>

    <tbody>
      <% @blocks.each do |block| %>
        <tr>
          <td><%= block.id %></td>
          <td><%= block.name %></td>
          <td><%= block.left %></td>
          <td><%= block.top %></td>
          <td><%= block.width %></td>
          <td><%= block.height %></td>
          <td><%= block.space_id %></td>
          <td><%= block.block_type %></td>
          <td><%= block.parent_id %></td>

          <td><%= link_to 'Show', block %></td>
          <td><%= link_to 'Edit', edit_block_path(block) %></td>
          <td><%= link_to 'Destroy', block, method: :delete, data: { confirm: 'Are you sure?' } %></td>
        </tr>
      <% end %>
    </tbody>
  </table>

  <br>

  <%= link_to 'New Block', new_block_path %>

</div>

<script>
  $(function() {
    $('#start_at').datetimepicker({
      pickTime: false
    });
    $('#end_at').datetimepicker({
      pickTime: false
    });
    $("#start_at").on("dp.change",function (e) {
       $('#end_at').data("DateTimePicker").setMinDate(e.date);
    });
    $("#end_at").on("dp.change",function (e) {
       $('#start_at').data("DateTimePicker").setMaxDate(e.date);
    });
  });
</script>